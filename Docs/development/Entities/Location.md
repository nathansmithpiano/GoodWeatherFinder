# Location

Each `Location` is determined by a precise set of GPS coordinates (latitude and longitude).

> ### Development
> I began by listing data that may be relevant to a mountain summit.  Then, in the name of normalization, I reorganized that data into other entities.  `Location` and its other entities will all have their own tables in the database.

### Mount Elbert

Mount Elbert is the highest peak in Colorado and a popular, well-known destination.  As the initial database contains Colorado peaks above 13,000 and 14,000 feet, I have chosen this location as the example for this documentation.

## Location Entity

> **Legend:
> ** **PK** = Primary Key | **FK** = Foreign Key | **NN** = Non Null | **AI** = Auto Incremented | **UQ** = Unique | **UN** = Unsigned

<table>
    <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Characteristics</th>
        <th>Value</th>
        <th>Mapping</th>
    </tr>
    <tr>
        <td><a href="#locationid">id</a></td>
        <td><code>int</code></td>
        <td>PK, NN, AI, UQ, UN, required</td>
        <td>generated</td>
        <td></td>
    </tr>
    <tr>
        <td><a href="#locationname">name<br>(name_id)</a></td>
        <td><code>Name</code></td>
        <td>FK, NN, UQ, UN, required</td>
        <td>`Name`</td>
        <td>
            <code>Location</code>
            <code>1:1</code>
            <code>Name</code>
            <br>
            <code>location.name_id</code>
            <code>int</code>
        </td>
    </tr>
    <tr>
        <td><a href="#locationlocationnames">otherNamesList</a></td>
        <td>List<<code>Name</code>></td>
        <td>optional</td>
        <td>
            <code>Name</code>, ...
            <br>
            <code>Name</code>
        </td>
        <td>
            <code>Location></code>
            <code>m:m></code>
            <code>Name></code>
            <br>
            <code>join table</code>
        </td>
    </tr>
    <tr>
        <td><a href="#locationgeometry_id">geometry<br>(geometry_id)</a></td>
        <td><code>Geometry</code></td>
        <td>FK, NN, UN, required</td>
        <td><code>Geometry</code></td>
        <td>
            <code>Location</code>
            <code>m:1</code>
            <code>Geometry</code>
            <br>
            <code>location.geometry_id</code>
            <code>int</code>
        </td>
    </tr>
    <tr>
        <td>categoryList</td>
        <td>List<<code>Category</code>></td>
        <td>optional</td>
        <td>
            <code>Category</code>, ...
            <br>
            <code>Category</code>
        </td>
        <td>
            <code>Location</code>
            <code>m:m</code>
            <code>Category</code>
            <br>
            <code>join table</code>
        </td>
    </tr>
    <tr>
        <td>activityList</td>
        <td>List<<code>Activity</code>></td>
        <td>optional</td>
        <td>
            <code>Activity</code>, ...
            <br>
            <code>Activity</code>
        </td>
        <td>
            <code>Location</code>
            <code>m:m</code>
            <code>Activity</code>
            <br>
            <code>join table</code>
        </td>
    </tr>
    <tr>
        <td>regionList</td>
        <td>List<<code>Region</code>></td>
        <td>optional</td>
        <td>
            <code>Region</code>, ...
            <br>
            <code>Region</code>
        </td>
        <td>
            <code>Location</code>
            <code>m:m</code>
            <code>Region</code>
            <br>
            <code>join table</code>
        </td>
    </tr>
    <tr>
        <td>typeList</td>
        <td>List<<code>Entity</code>></td>
        <td>optional</td>
        <td>
            <code>Mountain</code>, ...
            <br>
            <code>Other Entities</code>
        </td>
        <td>
            <code>Location</code>
            <code>m:m</code>
            <code>Others</code>
            <br>
            <code>join table</code>
        </td>
    </tr>
</table>

#### location.id <a href="#location-entity">üîù</a>
- Primary Key for `Location`. Automatically generated by the database.  
- Non-null, auto-increment, unique, unsigned, and required.

#### location.name_id <a href="#location-entity">üîù</a>
- Name for this location.
- `@JoinColumn` via location.name_id.
- Stored within `Location` as a `Name` entity.
- Each location has one primary name.  This primary name is unique for all Locations.
    - For this primary name, `Location` `1:1` `Name`.
- Non-null, unique, and required.

#### location.otherNamesList <a href="#location-entity">üîù</a>
- Additional names for this location.
    - For example, Mount Elbert is also known as Mt. Elbert. It may also have a traditional name, names in other languages, nicknames, etc.
- While primary name must be unique, other names are not.  Duplicates may exist within the database.
    - For example, several `Location` may be called "Buffalo Mountain", but each `Location` would have a unique primary name of "Buffalo Mountain A", "Buffalo Mountain (CO)", etc.  
    - If "Buffalo Mountain A" was deleted, we do not want "Buffalo Mountain" to be removed from the database.  Removing a `Location` should remove all the `Name` within its otherNamesList.  
    - Various `Location` would not share the same "Buffalo Mountain" `Name` within their otherNamesList collections.  
    - Therefore, the database would have several copies of the "Buffalo Mountain" `Name`.
- For otherNamesList, `Location` `m:m` `Name`.
- Optional.

#### location.geometry_id</a>
- Foreign key for this location's geometry.
- `@JoinColumn` via location.geometry_id.
- `Geometry` contains a coordinateList, which for a `Location` contains 1 and only 1 `Coordinates`.
    - For `Geometry` and `Coordinate`, `@JoinColumn` via `coordinates.geometry_id`.
- `Geometry` `1:1` `Coordinates`.
- Special considerations:
    - `Location` cannot obtain any weather data without `Coordinates`, so `location.geometry_id` is required.
    - No two locations should share the same coordinates, so for `location.geometry_id` should be unique.
    - Users could attempt to add a `Location` with `Coordinates` lacking precision, i.e. 39, -106. Before submitting a new location, it is necessary to confirm the `Coordinates` are unique and to re-prompt.
        - When submitting a location, a map could appear to confirm the location, and a user could drag the point to correct precision.  From the map, more precise `Coordinates` could be obtained.
- Non-null, unique, and required.

### Related Entities


<table>
    <tr>
        <th colspan="2">Location</th>
    </tr>
    <tr>
        <td>
            <table>
                <tr>
                    <th>id</th>
                    <th>geometry_id</th>
                </tr>
                <tr>
                    <td>1</td>
                    <td>2</td>
                </tr>
            </table>
        </td>
        <td>

```java
@OneToOne
@JoinColumn(name = "geometry_id")
private Geometry geometry;
```

</td>
</tr>
</table>


<table>
    <tr>
        <th colspan="2">Geometry</th>
    </tr>
    <tr>
        <td>
            <table>
                <tr>
                    <th>id</th>
                    <th>Type</th>
                </tr>
                <tr>
                    <td>2</td>
                    <td>"Point"</td>
                </tr>
            </table>
        </td>
        <td>

```java
public class Geometry {
    @OneToMany(mappedBy = "geometry")
    private List<Coordinates> coordinatesList;
}
```

</td>
</tr>
</table>

<table>
    <tr>
        <th colspan="2">Coordinates</th>
    </tr>
    <tr>
        <td>
            <table>
                <tr>
                    <th>id</th>
                    <th>geometry_id</th>
                    <th>Latitude</th>
                    <th>Longitude</th>
                </tr>
                <tr>   
                    <td>3</td>
                    <td>2</td>
                    <td>39.118075</td>
                    <td>-106.445417</td>
                </tr>
            </table>
        </td>
        <td>

```java
public class Coordinates {
    @ManyToOne
    @JoinColumn(name = "geometry_id")
    private Geometry geometry;
}
```

</td>
</tr>
</table>


<table>
    <tr>
        <th>Category</th>
        <th>Activity</th>
    </tr>
    <tr>
        <td valign="baseline">
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr><td>Mountain</td></tr>
                <tr><td>Summit</td></tr>
                <tr><td>Colorado 14er</td></tr>
            </table>
        </td>
        <td valign="baseline">
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr><td>Hiking</td></tr>
                <tr><td>Climbing</td></tr>
                <tr><td>Mountaineering</td></tr>
                <tr><td>Trail Running</td></tr>
                <tr><td>Camping</td></tr>
                <tr><td>Backpacking</td></tr>
                <tr><td>Skiing/Snowboarding (Backcountry)</td></tr>
            </table>
        </td>
    </tr>
</table>

<table>
    <tr><th>Mountain</th></tr>
    <tr>
        <td>
            <table>
                <tr>
                    <th>Name</th>
                    <th>Abbreviation</th>
                    <th>Elevation</th>
                    <th><code>Region</code></th>
                </tr>
                <tr>
                    <td>Mount Elbert</td>
                    <td>Mt. Elbert</td>
                    <td>4389.12</td>
                    <td><code>Region</code></td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<table>
    <tr><th>Region</th></tr>
    <tr>
        <td>
            <table>
                <tr>
                    <th>id</th>
                    <th>parent_id</th>
                    <th>Type</th>
                    <th>Name</th>
                </tr>
                <tr>
                    <td>1</td>
                    <td>null</td>
                    <td>Mountain Range</td>
                    <td>Rocky Mountains</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>1</td>
                    <td>Mountain Range</td>
                    <td>Southern Rocky Mountains</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>2</td>
                    <td>Mountain Range</td>
                    <td>Sawatch</td>
                </tr>
                <tr>
                    <td><b>4</b></td>
                    <td><b>3</b></td>
                    <td><b>Mountain Range</b></td>
                    <td><b>Elbert Massif</b></td>
                </tr>
                <tr>
                    <td><b>5</b></td>
                    <td><b>null</b></td>
                    <td><b>National Forest</b></td>
                    <td><b>San Isabel National Forest</b></td>
                </tr>
            </table>
        </td>
    </tr>
</table>

### TEMPLATE
<table>
    <tr>
        <th></th>
        <th></th>
    </tr>
    <tr>
        <td></td>
        <td></td>
    </tr>
</table>
